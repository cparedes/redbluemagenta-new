--- 
layout: post
title: Notes on Cluster Administration
post_id: "254"
categories:
- Computers
---
After building a Beowulf cluster from scratch at my work, I've learned a lot of things about how to setup a Beowulf cluster successfully using OSCAR and a lot about how to avoid problems in the future.  I've ran into a ton of issues with pushing software across an internal network to a bunch of nodes, mainly because the slave nodes in a Beowulf cluster typically have no access to the internet.  Thus, it's a little tricky when it comes to package management; you can either setup iptables rules on your head node in order to have it act as a NAT, or you can download whatever packages you will need (including all of the dependencies) and store them in a single directory.  I chose the latter because I don't want any of my slave nodes in my cluster to have access to the internets.  However, what's the easiest way to deploy a bunch of packages for a bunch of compute nodes in a cluster?

Well, it depends.  I found out that NFS shares are paramount for a working cluster installation, mainly because all of the nodes will need to run the same exact program and will need to analyze the same exact set of files as every other node.  I've learned this the hard way while trying to deploy <a href="http://sourceforge.net/projects/corra/">Corra</a>, which is a Bioinformatics tool for analyzing mass spectrometry data.  However, I also figure that it helps when you have a good proportion of the packages installed in default directories.  Thus, I install system libraries on every single node, and I share proteomics-related software via NFS.

As for actually setting up and administering the cluster, I use <a href="http://svn.oscar.openclustergroup.org/trac/oscar">OSCAR</a>. [Note: do not get the latest version, they do not call their versions "development" and "stable," but rather, "latest" and "old."  The "old" version on their downloads page is also outdated: the latest stable release is actually 5.1rc1, which you can find on their <a href="http://sourceforge.net/projects/oscar/files/">SourceForge page</a>.]  OSCAR is great once it's set up, but it can be a little bit of a pain when you're starting out for the first time with an OSCAR installation.  First of all, I would use only one MPI implementation: LAM/MPI is great.  Second, you'll really have to do some research into what sort of programs you'll be running on your cluster.  For instance, Corra requires PBS/Torque as the queueing system.  OSCAR offers both PBS/Torque and Sun Grid Engine as queueing systems while you're going through the installation, yet you can't install both of them at the same time.  Oh, and if you're going with PBS/Torque, install maui as well.  It's a pretty good job scheduler.

In any case, OSCAR is a great package to use if you're planning on building / administering a cluster with MPI.  It comes with a ton of great tools and makes it super easy to incorporate / delete nodes in your cluster.  I don't know much about SSI clusters at all, and I doubt I will anytime soon, since most proteomics applications I've seen so far seem to favor clusters setup with MPI.
